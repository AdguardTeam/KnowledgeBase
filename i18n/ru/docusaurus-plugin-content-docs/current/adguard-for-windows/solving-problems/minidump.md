---
title: Как собрать минидамп BSOD
sidebar_position: 9
---

:::info

В этой статье рассказывается об AdGuard для Windows — многофункциональном блокировщике рекламы, который защищает ваше устройство на системном уровне. [Скачайте приложение AdGuard](https://agrd.io/download-kb-adblock), чтобы увидеть, как оно работает

:::

:::note

Данные и файлы, предоставленные в файлах минидампа, обрабатываются в соответствии с [Политикой конфиденциальности AdGuard](https://adguard.com/ru/privacy.html).

:::

Синий экран смерти (Blue Screen of Death, BSOD) может иногда возникать при использовании AdGuard. В таких случаях наша команда поддержки может запросить файл минидампа памяти, чтобы помочь диагностировать проблему. Эти файлы содержат технические данные о сбоях, которые помогают нам идентифицировать и обрабатывать проблему.

## Проверка наличия существующего минидампа

Для сбора файлов минидампа вам потребуется доступ администратора на вашем компьютере. По умолчанию, Windows сохраняет эти файлы в папке `C:\Windows\Minidump\`. Файлы, которые вы ищете, будут называться либо `MEMORY.DMP`, либо соответствовать шаблону `Mini(ddmmmyy-xxx).dmp`, где буквы и цифры обозначают даты и порядковые номера.

![Файл минидампа](https://cdn.adtidy.org/content/kb/ad_blocker/windows/solving-problems/minidump.png)

Если вы не можете найти эти файлы, возможно, ваша система не настроена на автоматическое создание минидампов.

## Настройка параметров минидампа

Если минидампы не создаются автоматически, выполните следующие шаги, чтобы включить _Малый дамп памяти_:

1. Нажмите сочетание клавиш _Windows + R_, чтобы открыть диалоговое окно _Выполнить_.

2. Введите `sysdm.cpl` и щёлкните _Enter_. Это откроет окно _Свойства системы_.

   ![Открыть свойства системы \*mobile](https://cdn.adtidy.org/content/kb/ad_blocker/windows/solving-problems/sysdm.png)

3. Перейдите на вкладку _Дополнительно_ → _Загрузка и восстановление_ → _Параметры_.

   ![Вкладка «Дополнительно» \*mobile](https://cdn.adtidy.org/content/kb/ad_blocker/windows/solving-problems/advanced_tab.png)

4. Здесь вы найдете опцию под названием _Запись отладочной информации_. Убедитесь, что выбран _Малый дамп памяти (256 КБ)_ и что путь показывает на `%SystemRoot%\Minidump`. Эти настройки обеспечат создание Windows файлов минилампа, необходимых нам при возникновении BSOD.

   ![Малый дамп памяти \*mobile](https://cdn.adtidy.org/content/kb/ad_blocker/windows/solving-problems/systemroot.png)

5. Нажмите _ОК_, чтобы сохранить изменения.

## После аварии

После возникновения BSOD и перезагрузки компьютера вы можете найти сгенерированные файлы minidump в папке `C:\Windows\Minidump\`. Сортировка файлов по дате изменения позволяет легко найти самый последний файл, соответствующий аварии.

Если вы настроили параметры минидампа после того, как произошёл сбой, вам нужно будет воспроизвести проблему, чтобы создать новый файл минидампа.

## Сбор файла `wfpdiag.cab`

Наша команда поддержки может запросить файл wfpdiag.cab, а также файл minidump, чтобы более тщательно проанализировать системные логи и диагностировать проблемы. Чтобы получить файл, выполните следующие действия:

1. Включите защиту AdGuard.

2. Нажмите _Пуск_ и введите `cmd`, чтобы открыть _Командную строку_.

3. Щёлкните правой кнопкой мыши _Командная строка_ и выберите _Запуск от имени администратора_.

   :::note

   Файл wfpdiag.cab будет создан в текущем каталоге. Вы можете изменить местоположение, введя `cd <folder_name>`.

   :::

4. Чтобы начать логирование, введите команду: `netsh wfp capture start`.

5. Откройте любой сайт, чтобы направить трафик через AdGuard и записать процесс фильтрации.

6. Чтобы остановить логирование, введите `netsh wfp capture stop`.
