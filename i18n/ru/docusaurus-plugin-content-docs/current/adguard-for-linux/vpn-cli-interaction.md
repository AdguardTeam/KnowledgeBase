---
title: Взаимодействие с AdGuard VPN CLI
sidebar_position: 5
---

## Взаимодействие с AdGuard VPN CLI

Использовать AdGuard CLI в режиме **автоматического прокси** вместе с AdGuard VPN CLI в **режиме туннелирования** невозможно из-за петли маршрутизации. В настоящее время нельзя исключить трафик AdGuard VPN CLI из прозрачного проксирования AdGuard CLI, а трафик AdGuard CLI должен проходить через туннель AdGuard VPN CLI.

Есть два возможных решения:

- Переключить AdGuard CLI в режим **ручного прокси**.
    - В этом случае AdGuard VPN CLI можно использовать в **режиме туннелирования**, но потребуется вручную настроить приложения, в которых вы хотите блокировать рекламу, на использование прокси AdGuard CLI.
- Переключить AdGuard VPN CLI в **режим SOCKS5** и настроить AdGuard CLI с исходящим прокси-сервером, указывающим на интерфейс SOCKS5 AdGuard VPN CLI. В этом случае важно помнить, что:
    - Чтобы трафик приложения проходил через VPN-туннель, его необходимо либо прозрачно проксировать с помощью AdGuard CLI (что происходит по умолчанию для всех приложений), либо вручную настроить на использование интерфейса SOCKS5 AdGuard VPN CLI.
    - Чтобы не образовалась петля маршрутизации, включите опцию `skip_outbound_proxy` для AdGuard VPN CLI в разделе конфигурации приложений AdGuard CLI. По умолчанию `skip_outbound_proxy` включена для всех приложений, в названии которых есть `vpn`, включая AdGuard VPN CLI.
