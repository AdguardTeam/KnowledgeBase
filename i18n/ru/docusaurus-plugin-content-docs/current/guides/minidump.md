---
title: Как создать файл minidump для исправления ошибки BSoD
sidebar_position: 8
---

К сожалению, почти все пользователи Windows знакомы с ошибкой [Синий экран смерти (Blue Screen of Death, BSoD)](https://en.wikipedia.org/wiki/Blue_screen_of_death). Эта ошибка возникает, когда системе Windows сталкивается с проблемами, которые могут повлиять на безопасную работу системы, например, проблемы со сторонним кодом драйвера, аппаратным обеспечением или кодом Microsoft. Чтобы устранить ошибку синего экрана, пользователи могут использовать файл minidump.

## Что такое файл minidump?

Файл minidump — это файл с информацией о характере сбоя системы. Он создаётся непосредственно перед появлением синего экрана и содержит минимальное количество полезной информации, которую можно использовать для решения проблемы. Обычно расширение файла minidump — *.dmp*.

:::note
В Windows 10 на синем экране отображается код остановки и QR-код. Пользователь может использовать эти данные, чтобы найти в интернете информацию о конкретной проблеме.

:::

По умолчанию возможность создания файла minidump отключена. Поэтому сначала нужно разобраться в том, как её включить, а потом уже углубляться в детали использования этого файла.

## Как разрешить создание файла minidump

Даже если вы не сталкивались с ошибками BSoD, лучше настроить эту опцию — это общая рекомендация, не обязательно связанная с продуктами AdGuard. Следуйте этой инструкции, чтобы автоматически создать minidump-файл.

 1. Наберите *sysdm.cpl* в строке поиска Windows и нажмите **Открыть**. На экране появится окно **Свойства системы**.

    :::tip

    Вы также можете перейти в **Настройки** → **Система** → **О программе** → **Дополнительные параметры системы**.


:::

    ![Свойства системы *mobile_border](https://cdn.adtidy.org/blog/new/c2huSystem_Properties.jpeg)

 1. Перейдите во вкладку **Дополнительно**.
 1. В разделе **Загрузка и восстановление** нажмите **Параметры**.

    ![Загрузка и восстановление *mobile_border](https://cdn.adtidy.org/blog/new/1dmybiStartup_and_Recovery.png)

 1. Активируйте эти три опции:

    - Записать событие в системный журнал
    - Выполнить автоматическую перезагрузку
    - Запись отладочной информации → Малый дамп памяти (256 КБ)

    ![Три опции *mobile_border](https://cdn.adtidy.org/blog/new/nmr4eThree_options.png)

 1. Нажмите **OK**, чтобы применить настройки.
 1. Перезагрузите компьютер.

Вы разрешили создание файла minidump. Теперь он будет создаваться автоматически при сбое системы.

:::note

По умолчанию minidump-файл хранится в папке **%SystemRoot%\Minidump**. Вы можете выбрать любую другую папку, но помните, что многие программы по умолчанию ищут именно это место, поэтому мы не рекомендуем менять расположение.

:::

## Сбор файла wfpdiag.cab

Наша команда поддержки может запросить файл wfpdiag.cab, а также файл minidump, чтобы более тщательно проанализировать системные логи и диагностировать проблемы. Чтобы получить файл, выполните следующие действия:

1. Включите защиту AdGuard.

1. Нажмите *Пуск* и введите `cmd`, чтобы открыть командную строку

1. Щёлкните правой кнопкой мыши по командной строке и выберите *Запуск от имени администратора*

    :::note

    В вашем текущем каталоге создаётся файл wfpdiag.cab. Вы можете изменить местоположение, введя `cd <folder_name>`.


:::

1. Чтобы начать логирование, введите команду: `netsh wfp capture start`

1. Посетите любой сайт, чтобы направить трафик через AdGuard и зафиксировать процесс фильтрации

1. Чтобы остановить логирование, введите `netsh wfp capture stop`
