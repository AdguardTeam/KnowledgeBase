---
title: Расширенные (низкоуровневые) настройки
sidebar_position: 7
---

Ранее известные как низкоуровневые настройки, расширенные настройки содержат параметры, которые выходят за рамки компетенции среднего пользователя и не находят применения в повседневном использовании. AdGuard для Windows функционирует без необходимости изменять любой из низкоуровневых параметров. Однако они предоставляют дополнительные возможности в некоторых сложных ситуациях или при решении нестандартных проблем.

> Изменение *Расширенных настроек* может вызвать проблемы с производительностью AdGuard, нарушить подключение к интернету или поставить под угрозу вашу безопасность и конфиденциальность. Вносить изменения в эти настройки следует только в том случае, если вы уверены в том, что делаете, или если об этом вас попросила наша служба поддержки.

## Как перейти к Расширенным настройкам

Чтобы попасть в *Расширенные настройки*, на главном экране откройте *Настройки → Основные настройки* и прокрутите вниз до *Расширенных настроек*. Или выберите *Расширенные → Расширенные настройки...* в трей-меню.

## Расширенные настройки

После того как вы откроете Расширенные настройки, вам будут представлены следующие опции:

### Блокировать TCP Fast Open

Если эта функция включена, AdGuard будет блокировать TCP Fast Open в браузере Edge. Чтобы применить настройки, необходимо перезапустить браузер.

### Исключите приложение из фильтрации, введя полный путь

Если вы хотите, чтобы AdGuard не фильтровал конкретные приложения, укажите полный путь к ним, и приложения будут исключены из фильтрации. Разделите разные пути точкой с запятой.

### Включить всплывающие уведомления AdGuard

Включите эту функцию, чтобы видеть всплывающие уведомления AdGuard. Они появляются не слишком часто и содержат только важную информацию. Вы также можете использовать трей-меню, чтобы вызвать последнее всплывающее уведомление.

### Автоматически перехватывать URL-адрес фильтра

Включите эту функцию, если вы хотите, чтобы AdGuard автоматически перехватывал URL фильтра (например, `abp:subscribe` и т.п.) и открывал диалог установки пользовательского фильтра.

### Использовать драйвер в режиме перенаправления

Если эта опция включена, AdGuard перехватывает весь трафик и перенаправляет его на локальный прокси-сервер для дальнейшей фильтрации.

В противном случае AdGuard будет фильтровать весь трафик на лету, без перенаправления. При этом система будет считать AdGuard единственным приложением, которое подключается к интернету (другие приложения будут направляться через него). Минусом является то, что это сделает системный брандмауэр менее эффективным. А плюсом — то, что этот подход работает немного быстрее.

### Открывать главное окно при запуске системы

Включите эту опцию, чтобы главное окно AdGuard открывалось при каждом запуске системы. Обратите внимание, что эта настройка не влияет на то, запущена ли реальная фильтрация или нет. Она находится в разделе *Настройки → Общие настройки*

### Фильтровать локальные адреса

Если вы хотите, чтобы AdGuard фильтровал соединения loopback, установите флажок. Эта опция всегда будет включена, если у вас установлен AdGuard VPN, потому что в противном случае он не сможет работать.

### Включить запись HAR

Эта опция должна быть включена **только в целях отладки**. Если вы установите флажок, AdGuard создаст файл, содержащий информацию обо всех отфильтрованных HTTP-запросах в формате HAR 1.2. Этот файл можно проанализировать с помощью приложения Fiddler. Обратите внимание, что это может значительно замедлить просмотр веб-страниц.

### Показывать QUIC

Позволяет отображать записи протокола QUIC в отчёте журнала фильтрации. Эта опция работает только для заблокированных запросов.

### Блокировать Java

Некоторые сайты и веб-сервисы до сих пор используют устаревшие технологии поддержки Java-плагинов. API-интерфейс, лежащий в основе Java-плагинов, небезопасен. Вы можете отключить такие плагины в целях безопасности. Тем не менее, даже если вы решите использовать опцию *Блокировать Java*, JavaScript будет по-прежнему включён.

### Действие, применяемое к заблокированным DNS-запросам

Здесь вы можете выбрать способ, которым AdGuard будет отвечать на DNS-запросы, которые должны быть заблокированы:

* Ответ ошибкой «Refused»
* Ответ ошибкой «NxDomain»
* Ответ пользовательским IP-адресом

### Пользовательский IPv4-адрес

Если в качестве ответа на заблокированные DNS-запросы выбран «Пользовательский IP-адрес», здесь необходимо указать IPv4-адрес, который будет возвращён в ответ на заблокированные запросы «A». Если он не указан, AdGuard ответит ошибкой «Refused» по умолчанию.

### Пользовательский IPv6-адрес

Если в качестве ответа на заблокированные DNS-запросы выбран «Пользовательский IP-адрес», здесь необходимо указать IPv6-адрес, который будет возвращён в ответ на заблокированные запросы «AAAA». Если он не указан, AdGuard ответит ошибкой «Refused» по умолчанию.

### Резервные (fallback) серверы

Здесь вы можете указать альтернативный DNS-сервер, на который будет перенаправлен DNS-запрос, если основной сервер не ответит в течение времени ожидания, указанного в следующем разделе. Есть три варианта на выбор:

* Не использовать резервные серверы;
* Использовать системные серверы;
* Использовать пользовательские серверы.

### Время ожидания ответа DNS-сервера

В этом поле вы можете указать время в миллисекундах, в течение которого AdGuard будет ждать ответа от выбранного DNS-сервера, прежде чем прибегнуть к резервному. Если вы не заполните это поле или введёте недопустимое значение, будет использовано значение 5000.

### Список пользовательских резервных (fallback) серверов

Если вы хотите, чтобы AdGuard использовал пользовательские fallback-серверы, перечислите их в этом разделе, по одному в строке.

### Список пользовательских bootstrap-адресов

Bootstrap — это промежуточный DNS-сервер, используемый для получения IP-адреса безопасного DNS-сервера, который вы выбрали ранее в разделе *DNS-защита*. Такое «промежуточное звено» нужно при использовании протоколов, которые обозначают адрес сервера буквами (например, DNS-over-TLS). В этом случае bootstrap выступает в роли переводчика, трансформируя буквы в цифры, понятные вашей системе.

По умолчанию используется системный DNS-резолвер, а первоначальный bootstrap-запрос идёт через 53 порт. Если вас это не устраивает, перечислите здесь IP-адреса DNS-серверов, которые будут использоваться для определения адреса зашифрованного DNS-сервера. Указанные IP-адреса будут применены в порядке перечисления. Если вы укажете некорректные адреса или не укажете их вовсе, будут использованы системные IP-адреса.

### DNS-исключения

Все DNS-запросы к перечисленным здесь доменам будут перенаправляться на системный DNS-сервер вместо DNS-сервера, указанного в настройках приложения. Также к таким запросам не будут применяться правила DNS-фильтрации.

### Блокировать ECH

Если опция включена, AdGuard удаляет из ответов параметры Encrypted Client Hello.

### Включить фильтрацию зашифрованных DNS-запросов

Если опция включена, AdGuard перенаправляет зашифрованные DNS-запросы на локальный DNS-прокси в дополнение к обычным DNS-запросам.
