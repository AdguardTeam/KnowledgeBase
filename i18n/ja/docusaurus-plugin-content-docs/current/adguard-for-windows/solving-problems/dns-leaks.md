---
title: DNSリークの可能性
sidebar_position: 9
---

:::info

この記事では、システムレベルでお使いのデバイスを保護する多機能広告ブロッカー、「AdGuard for Windows」について書いています。 実際にどのように動作するかを確認するには、[AdGuard アプリをダウンロード](https://agrd.io/download-kb-adblock)してください。

:::

AdGuard for Windowsでは、クエリを解決するために、システムDNSサーバーの代わりにDNSサーバーアドレスを指定することができます。（システムDNSサーバーは、システム設定で上書きされていない場合、インターネットプロバイダによって提供されます。） デフォルトでないDNSサーバーを使うことで、インターンシッププロバイダーの傍受からDNSトラフィックを守ることができます。 さらに、暗号化および/またはフィルタリングDNSサーバーを選択することで、悪質業者や迷惑な広告からの保護機能を得ることができます。

多くの AdGuard for Windows ユーザーは、DNS保護機能を高く評価してくれています。 しかし、次のような問題が発生していることもあります。https://ipleak.net/ のようなウェブサイトをチェックすると、リクエストは選択したDNSサーバーではなく、デフォルトのDNSサーバーによって処理されていることがわかります。 本記事では、なぜこのようなことが起こるのか、またそれを回避する方法を説明します。

## bootstrap DNSアドレス

DNS サーバーのアドレスは、IP またはドメイン名として記述できます。 IPアドレスの場合、AdGuardはDNS保護モジュールで指定されたサーバーにDNSリクエストを直接転送しますので、問題はありません。 しかし、DoTやDoHのような暗号化されたDNSサーバーアドレスは、ドメイン名として記述されることがほとんどです。 この場合、最初に暗号化されたDNSサーバーアドレスを解決するために、AdGuardはデフォルトでシステムDNSサーバーにDNSクエリを送信します。 この接続を、チェックサービスがリークと認識してしまうものです。

**このリークを解消する方法はこちら:**

- 「*詳細設定*」へ移動します。
- 「*カスタムbootstrapアドレスの一覧*」セクションまでスクロールダウンします。
- IPアドレス形式でカスタムブートストラップアドレスを入力してください（[こちらの既知のDNSプロバイダリスト](https://adguard-dns.io/kb/general/dns-providers/)を使用できます）。
- 「*保存*」をクリックします。

## フォールバックDNSサーバー

インターネット接続が弱い、デフォルトで設定されているタイムアウトの期限切れ、またはサーバー関連の問題のために、AdGuardが指定されたサーバーに到達できないことがあります。 この場合、デフォルトではシステムDNSサーバーであるフォールバックサーバーに、AdGuardは接続します。 この接続もチェックサービスによってリークとして認識されます。

**このリークを解消する方法はこちら:**

- 「*詳細設定*」へ移動します。
- 「*フォールバックサーバー*」セクションまでスクロールします。
- 「*カスタムサーバーを使用*」オプションをチェックします。
- 次に、「*カスタムフォールバックサーバーのリスト*」セクションを見つけて、カスタムフォールバックサーバーを1行に1つずつ入力します。

もしくは

- 「*詳細設定*」へ移動します。
- 「*フォールバックサーバー*」セクションまでスクロールします。
- 「*フォールバックサーバーを使用しない*」オプションをチェックします。

もしくは

- 「*詳細設定*」へ移動します。
- 「*DNSサーバーのタイムアウト期間*」セクションまでスクロールします。
- 任意の大きな数値を入力します。
