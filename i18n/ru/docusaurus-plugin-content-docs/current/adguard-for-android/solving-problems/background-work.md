---
title: Как настроить фоновую работу AdGuard
sidebar_position: 9
---

В некоторых случаях приложения не остаются в фоновом режиме ("активными" или в спящем режиме) из-за встроенной функции оптимизации ОС Android или так называемого "режима экономии батареи" — эта функция может закрывать фоновые приложения. Может быть неудобно перезапускать их каждый раз, когда они закрываются. Чтобы избежать завершения работы фонового приложения, необходимо выполнить шаги, указанные нами в инструкции отдельно для каждого производителя (версии) Android OS. Обратите внимание, что инструкции для разных производителей в основном очень похожи.

## Asus

Информация о проблемах на устройствах Asus ещё далеко не исчерпывающая, поэтому в перспективе их может быть больше, чем указано здесь. Мы будем дополнять статью по мере поступления информации.

Зайдите в Настройки > Power Manager > Mobile Manager > Настройки > Параметры экономии заряда батареи > Автозапуск Manager > AdGuard > снимите флажок.

## Xiaomi

### MIUI 12.0.8+

Чтобы приложение AdGuard успешно работало в фоновом режиме, сделайте следующее:

Зайдите в **Настройки** > **Приложения** > **Управление приложениями** > прокрутите вниз, чтобы найти **AdGuard**, включите **Автозапуск**.

![Настройки Xiaomi](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/xiaomi4en.jpeg)

На том же экране прокрутите вниз до настройки **Контроль активности**, перейдите в неё и выберите "Нет ограничений".

![Miui](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/miui12_en_0a.png)

Запустите приложение **Безопасность**.

Нажмите на значок **шестерёнки** в правом верхнем углу экрана.

![Настройки Miui](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/miui12_en_1.jpeg)

На экране "Настройки" выберите пункт **"Ускорение"**.

![Настройки Miui](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/miui12_en_2.png)

Затем нажмите на **"Закрепленные приложения"**.

![Настройки Miui](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/miui12_en_3.jpeg)

На экране **Закреплённые приложения** переведите тумблер AdGuard в активное положение.

![Настройки Miui](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/miui12_en_4.jpeg)

Готово! Вы успешно закрепили приложение AdGuard.

### MIUI 12

![Xiaomi](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/xiaomi4en.jpeg)

Зайдите в **Настройки** > **Приложения** > **Управление приложениями** > **AdGuard**.

- Включите Автозапуск AdGuard
- В Разрешениях выберите **Нет ограничений** для Контроля фоновой активности

![Xiaomi](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/xiaomi5en.jpeg)

Теперь запустите Диспетчер запущенных приложений, проведя пальцем вверх от нижней грани экрана и найдите приложение AdGuard.

![Xiaomi](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/xiaomi6.jpeg)

Нажмите на него и удерживайте, пока не появится специальное меню. Нажмите на значок замка.

![Xiaomi](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/xiaomi7en.jpeg)

Теперь этот значок должен быть над окном AdGuard.

![Xiaomi](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/xiaomi8en.jpeg)

### MIUI 10-11

Чтобы приложение успешно работало в фоновом режиме, настройте следующие параметры:

![Xiaomi](https://cdn.adguard.com/public/Adguard/screenshots/android/xiaomi1en.png)

- **Настройки** > **Батарея и производительность** > отключите режим **«Экономия энергии»**

![Xiaomi](https://cdn.adguard.com/public/Adguard/screenshots/android/xiaomi2en.png)

- Затем откройте настройки **Контроль фоновой активности**> **AdGuard** > **Нет ограничений**

![Xiaomi](https://cdn.adguard.com/public/Adguard/screenshots/android/xiaomi3en.png)

### Управление питанием

Пожалуйста, включите:

- **Настройки** > **Расширенные настройки** > **Диспетчер батареи** > установите **План электропитания** на **Производительность**
- **Настройки устройства** > **Расширенные настройки** > **Диспетчер батареи** > **Защищённые приложения** – ваше устройство должно быть в списке защищённых
- **Настройки устройства** > **Приложения** > **ваше приложение** > **Батарея** > **Энергосберегающая подсказка** и **Продолжить работу после выключения экрана**
- **Настройки** > **Дополнительные настройки** > **Батарея и производительность** > **Управление использованием батареи приложениями**. И здесь:

1. Отключите режимы энергосбережения
2. Выберите следующие параметры: **Энергосбережение в фоновом режиме** > **Выбрать приложение** > **выберите своё приложение** > **Фоновые настройки** > **Нет ограничений**

### Режим энергосбережения

**Безопасность** > **Батарея** > **Режим энергосбережения** > **AdGuard** > **Нет ограничений**

### Закрепление приложения

Чтобы настроить фоновую работу AdGuard для устройств Xiaomi, обратите внимание на пункты Батарея и Разрешения.

- Нажмите на кнопку **Недавние задачи** и проведите по AdGuard вниз, чтобы сделать опции *видимыми* (как показано на скриншоте):

![Xiaomi](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/xiaomirecent.png)

- Нажмите на иконку **замка**. Это не даст Xiaomi автоматически закрывать AdGuard. Это должно выглядеть так:

![Xiaomi](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/xiaomilocked.png)

- Перейдите в раздел **Батарея**

- Выберите приложение для **экономии заряда батареи**

- Найдите и выберите **AdGuard**

- Настройте следующие **Фоновые параметры**:

![Xiaomi](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/xiaomirest.png)

- Перейдите в **Разрешения**

- Выберите **Автозапуск**

- Убедитесь, что эта функция включена для AdGuard:

![Xiaomi](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/xiaomiautostart.png)

## Samsung

### Galaxy S9 / S10

Оптимизация батареи **включена по умолчанию**. При обновлении приложения или ПО настройки также возвращаются к значениям по умолчанию, заставляя вас снова отключать их.

### Спящие приложения

Меню спящих приложений — это снайперское гнездо для политики уничтожения приложений Samsung. Точно следуйте инструкциям, чтобы предотвратить уничтожение приложений.

Чеклист:

- Отключите **Перевод неиспользуемых приложений в спящий режим**
- Отключите **Автоотключение неиспользуемых приложений**
- Удалите своё приложение из списка спящих приложений
- Отключите фоновые ограничения для приложения

1. Запустите **Уход за устройством** из настроек телефона

![Samsung](https://cdn.adguard.com/public/Adguard/screenshots/android/samsung1en.png)

2. Нажмите **Аккумулятор**

![Samsung](https://cdn.adguard.com/public/Adguard/screenshots/android/samsung2en.png)

3. Нажмите на **иконку меню в виде трёх точек** > ** Настройки**

![Samsung](https://cdn.adguard.com/public/Adguard/screenshots/android/samsung3en.png)

4. Отключите все переключатели (кроме Уведомлений)
5. Нажмите на **Приложения в спящем режиме**

![Samsung](https://cdn.adguard.com/public/Adguard/screenshots/android/samsung45en.png)

6. **Разбудите** все приложения с помощью значка мусорной корзины

![Samsung](https://cdn.adguard.com/public/Adguard/screenshots/android/samsung6en.png)

> **Важно**: Убедитесь, что функции `Перевод в режим сна` и `Автоотключение приложений` отключены. В противном случае Samsung вернёт ваши приложения в спящий режим через несколько дней, даже если вы разбудили их вручную.

### Старые устройства Samsung

Для ранних устройств Samsung нет особой необходимости в настройке фоновой работы, но если вы столкнулись с тем, что приложение закрывается или исчезает из меню недавних задач через некоторое время, сделайте следующее:

 - Нажмите кнопку **Недавние задачи**, коснитесь значка **Дополнительных настроек**. Это должно выглядеть так:

 ![Настройки Samsung](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/samsungoptions.png)

 - Нажмите на **Закрепить приложения**:

 ![Настройки Samsung](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/samsunglockapps.png)

  - Нажмите на значок замка

 ![Настройки Samsung](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/samsunglock.png)

## Huawei

### Запуск приложения на устройствах с EMUI 8, 9 и 10 (Huawei P20, Huawei P20 Lite, Huawei Mate 10…)

- **Настройки телефона** > **Батарея** > **Запуск приложений**, активируйте **Управление вручную** и убедитесь, что все тумблеры включены.

![Huawei](https://cdn.adguard.com/public/Adguard/screenshots/android/huawei1en.png)

1. **Настройки телефона** > **Батарея** > **Запуск приложений**. На некоторых устройствах эта функция может быть недоступна или названа по-другому.

![Huawei](https://cdn.adguard.com/public/Adguard/screenshots/android/huawei2en.png)

2. Выключите **Управлять всем автоматически**

![Huawei](https://cdn.adguard.com/public/Adguard/screenshots/android/huawei3en.png)

3. Make sure to **enable** all toggles.

Также для надёжных фоновых процессов вы можете удалить Power Genie, как описано ниже.

### Устройства EMUI 9 и более поздние

> Важно: На телефонах с EMUI 9 и позже (Android P+) стоит новый менеджер процессов PowerGenie, которое закрывает все приложения, не находящиеся в белом списке Huawei, и не предоставляет пользователям параметры конфигурации. Ниже описано, как его удалить.

Huawei чрезвычайно изобретательны в оптимизации работы приложений на своих устройствах. В дополнение ко всем нестандартным мерам управления питанием, описанным ниже, они представили новое приложение-менеджер процессов, встроенное прямо в EMUI 9 на Android Pie.

Оно называется **PowerGenie** и «убивает» все приложения не из его белого списка. Вы не можете добавлять собственные приложения в предварительно составленный белый список. Это означает, что удаление Power Genie — единственный способ наладить нормальное функционирование приложений на Huawei.

К сожалению, это системное приложение, которое можно удалить полностью только с помощью ADB (Android Debug Bridge). Источник: [XDA](https://forum.xda-developers.com/mate-20-pro/themes/remove-powergenie-to-allow-background-t3890409).

**Вам нужно**:

1) [Установить ADB](https://www.xda-developers.com/install-adb-windows-macos-linux/) на ваш компьютер;

2) Подключить телефон с помощью кабеля передачи данных;

3) Включить на телефоне **Параметры разработчика**;

4) Включить **отладку через USB** в Параметрах разработчика на телефоне;

5) Выполнить на компьютере следующие команды:

`adb shell pm uninstall --user 0 com.huawei.powergenie`

Мы ещё не подтвердили это, но вполне возможно, что вы можете просто отключить Power Genie через *Настройки телефона* > * Приложения*. Этот параметр необходимо будет повторно применять каждый раз при перезагрузке устройства.

> Пожалуйста, следуйте шагам ниже — у телефонов Huawei обычно много механизмов энергосбережения. И ещё, у вас может не быть PowerGenie на телефоне, но ваши приложения всё ещё будут закрываться с помощью другого механизма.

### Устройства с EMUI 6+ (и некоторые устройства с EMUI 5):

- **Настройки устройства** > **Расширенные настройки** > **Диспетчер батареи** > **План электропитания** установлен на **Производительность**;
- **Настройки устройства** > **Расширенные настройки** > **Диспетчер батареи** > **Защищённые приложения** — добавьте ваше приложение в **Защищённые**;
- **Настройки устройства** > **Приложения** > **Ваше приложение** > **Батарея** > **Энергосберегающая подсказка** `[убрать галочку]` и ** Продолжить работу после выключения экрана** `[поставить галочку]`;
- **Настройки устройства** > **Приложения** > **Расширенные (внизу)** > **Игнорировать оптимизацию батареи** > Нажмите «Разрешено» > **Все приложения** > Найдите своё приложение в списке и выберите **Разрешить**.

#### Huawei P9 Plus:

Откройте настройки устройства > **Приложения** > **Настройки** > **Специальный доступ** > выберите **Игнорировать оптимизацию батареи** > нажмите **Разрешить** для выбранного приложения.

### Huawei P20, Huawei Honor 9 Lite и Huawei Mate 9 Pro:

Откройте настройки устройства > **Батарея** > **Запуск приложений**> выберите **Управление вручную** и убедитесь, что все тумблеры включены.

### Huawei P20, Huawei P20 Lite, Huawei Mate 10:

**Настройки телефона** > **Батарея** > **Запуск приложений**, активируйте **Управление вручную** и убедитесь, что все тумблеры включены. Также для надёжных фоновых процессов вы можете удалить Power Genie, как описано выше.

### Ранние устройства Huawei

Более ранние устройства Huawei легки в настройке, достаточно выполнить два шага для закрепления приложения в фоновом режиме, чтобы менеджер процессов не остановил его принудительно.

  - Нажмите на кнопку **Недавние задачи**:

  ![Последние приложения Huawei](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/huaweirecentapps.jpeg)

  - Нажмите на значок замка:

 ![Блокировка Huawei](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/huaweilock.jpeg)

Кроме того, чтобы более эффективно настроить фоновую работу вашего приложения, вам следует открыть настройки устройства и сделать следующее:

- Откройте **Расширенные настройки** > затем **Менеджер батареи** > в **Управлении питанием** выберите **Производительность**;
- Выберите **Защищённые приложения** в разделе **Менеджер батареи** и проверьте, находится ли ваше приложение среди них;
- Откройте раздел **Приложения** в основных настройках и выберите AdGuard > затем **Батарея** > активируйте опции **Сообщать об энергоёмкости** и **Работа при выключенном экране**;
- Then in the **Apps** section open **Settings** (at the bottom) > **Special access** > choose **Ignore battery optimization** > press **Allowed** > **All apps** > find AdGuard on the list and set it to **Deny**.

## Meizu

Подход к ограничениям фонового процесса у Meizu практически такой же, как у Huawei и Xiaomi. Чтобы избежать отключения фоновой работы AdGuard и любого другого приложения, настройте следующие параметры:

- Отправляйтесь в **Расширенные настройки** > затем откройте **Менеджер батареи** > установите схему **Управления питанием** на **Производительность**;
- Выберите **Защищённые приложения** в разделе **Менеджер батареи** и проверьте, находится ли ваше приложение среди них;
- Откройте раздел **Приложения** и выберите AdGuard > затем **Батарея** > активируйте опции **Сообщать об энергоёмкости** и **Работа при выключенном экране**;

## Nokia

Nokia на Android O и P отключает все фоновые процессы приложений через 20 минут после выключения экрана.

Вот что необходимо сделать для предотвращения остановки фоновой работы приложений:

- Перейдите в настройки устройства > откройте **Приложения** > выберите **Все приложения**;
- Затем откройте меню в правом верхнем углу > выберите **Показать системные**;
- Найдите приложение **Энергосбережение** в списке приложений, выберите его и нажмите **Принудительная остановка**. Приложение будет остановлено до следующего перезапуска системы.

Теперь фоновые приложения должны работать без перебоев, используя стандартную оптимизацию батареи в системе Android.

**Существует альтернативное решение для оптимизации фоновой работы, которое больше подходит для опытных пользователей. Вы найдёте инструкции ниже.**

### Nokia 1 (Android Go)

- Удалите файл com.evenwell.emm с помощью следующих команд adb:

`adb shell` `pm uninstall --user 0 com.evenwell.emm`

### Другие модели Nokia

- Удалите файл com.evenwell.powersaving.g3 с помощью следующей команды adb:

`adb shell` `pm uninstall --user 0 com.evenwell.powersaving.g3`

## Oppo

Фоновые службы и приложения иногда отключаются (включая службы специальных возможностей, которые затем необходимо включать вручную) после того, как вы выключаете экран. Пока что обходной путь для этого следующий:

Перейдите в **Центр безопасности** > нажмите **Разрешения на конфиденциальность** > **Менеджер запуска** и дайте приложению AdGuard разрешение работать в фоновом режиме.

Другие решения:

* Закрепите приложение в меню последних действий
* Добавьте приложение в список приложений в «менеджере запуска» и «плавающем списке приложений» (com.coloros.safecenter / com.coloros.safecenter.permission.Permission)
* Отключите оптимизацию батареи

## Oneplus

Устройства с OxygenOS — наиболее проблемные из-за специфической для ОС очистки кэша и освобождения оперативной памяти, включая оптимизацию ОС. Кроме того, OxygenOS может прервать работу приложения, если вы не пользуетесь им некоторое время. Чтобы исправить это, выполните следующие действия:

 - Откройте **Настройки**

 - **Батарея** > **Оптимизация батареи**

 - Найдите приложение, которое должно функционировать постоянно

 - Нажмите на него и выберите опцию **Не оптимизировать**

 - Нажмите **Готово**, чтобы сохранить изменения

 - Откройте меню недавних приложений (как показано на этом снимке экрана):

 ![Onepluslock](https://cdn.adguard.com/public/Adguard/kb/PicturesEN/android/onepluslock.png)

- Закрепите приложение AdGuard:

![Oneplusdots](https://cdn.adguard.com/public/Adguard/kb/PicturesEN/android/oneplusdots.png)

> На некоторых устройствах OnePlus есть функции «Автозапуск» и «Глубокая Оптимизация». Использование этих функций не позволяет приложениям работать в фоновом режиме. Пожалуйста, отключите его для вашего приложения.

И вот что ещё можно попробовать:

 - Откройте настройки устройства > **Батарея** > **Оптимизация батареи** > откройте список **Все приложения** (верхнее меню) > выберите ваше приложение > активируйте функцию **Не оптимизировать**

 - Откройте настройки устройства > **Батарея** > **Оптимизация батареи** > три точки > **Дополнительная оптимизация** > Отключите Глубокую Оптимизацию

## Sony

Sony были первым разработчиком мобильных OS, который внедрил нестандартную оптимизацию фоновых процессов и тем самым открыл ящик Пандоры. Этот механизм называется Stamina (режим оптимизации батареи), и он мгновенно прерывает все фоновые процессы при включении.

**Решение:**

Перейдите в **Настройки** > **Батарея** > Три точки справа вверху > **Оптимизация батареи** > **Приложения** > **AdGuard** > снимите галочку

## Wiko

У устройств Wiko могут возникать проблемы с точки зрения нестандартной оптимизации фоновых процессов, которую необходимо настроить, чтобы приложения работали должным образом.

**Решение:**

- Перейдите в **Ассистент** > **Батарея** > Выключите **Режим энергосбережения**
- Вернитесь в предыдущее меню и перейдите в **Ручной режим**
- Нажмите на значок **шестерёнки** в правом верхнем углу > **Белый список фоновых приложений** > Выберите **AdGuard**

## Стандартные устройства Pixel/Nexus/Essential на базе Android

Android stock OS normally does not conflict with applications working in the background, but if you are facing any issues you will need to switch on the **Always-on VPN** mode.

 - Перейдите в раздел **Настройки** > **Сеть и Интернет**

 ![Stocknetwork](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/stocknetwork.png)

 - Откройте режим **VPN** и выберите **AdGuard**

 ![Stockvpn](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/stockvpn.png)

 - Set up **Always-on VPN** mode

 ![Stockadguard](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/background-work/stockadguard.png)