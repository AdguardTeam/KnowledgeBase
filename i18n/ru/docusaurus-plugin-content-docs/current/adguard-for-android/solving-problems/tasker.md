---
title: Как автоматизировать AdGuard для Android
sidebar_position: 3
---

Многие пользователи выбирают Android именно потому, что эта ОС позволяет настроить мобильное устройство под свои вкусы и держать всё под контролем. И это абсолютно в порядке вещей, когда пользователей AdGuard по какой-то причине не устраивает его поведение по умолчанию. Допустим, вы хотите, чтобы защита отключалась при запуске определённого приложения и снова включалась при его остановке. This is a job for the Tasker app.

## Интерфейс AdGuard

Существует множество «приложений-таскеров»‎, например, [Tasker](https://play.google.com/store/apps/details?id=net.dinglisch.android.taskerm&noprocess), [AutomateIt](https://play.google.com/store/apps/details?id=AutomateIt.mainPackage&noprocess) и другие. AdGuard предоставляет интерфейс, который позволяет этим приложениям настраивать различные правила автоматизации.

![Автоматизация AdGuard](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/tasker/adgautomation.png)

Благодаря этому интерфейсу любое приложение может послать специальное сообщение (также называемый «‎intent», или «‎интент»), которое содержит имя действия и какую-либо дополнительную информацию. AdGuard увидит этот интент и выполнит запрашиваемое действие.

### Вопросы безопасности

Не будет ли опасно, спросите вы, позволить каким-то случайным приложениям управлять тем, что делает AdGuard? Именно для этого вместе с интентом отправляется пароль. Этот пароль генерируется автоматически, но вы, конечно, можете поменять его самостоятельно в расширенных настройках AdGuard.

### Доступные действия

Вот список действий, которые, будучи включёнными в интент, будут понятны AdGuard:


`start` starts the protection, no extra data is needed;

`stop` stops the protection, no extra data required;

`pause` pauses the protection. Разница между `pause` и `stop` в том, что при нажатии на первый появляется уведомление, перезапускающее защиту. Дополнительные параметры не нужны;

`update` проверяет наличие доступных обновлений фильтра и приложения, дополнительные данные не нужны;

-----

`dns_filtering` включает и выключает DNS-фильтрацию. Требуется установить дополнительный флажок:

`enable:true` или `enable:false` соответственно включает или выключает DNS-фильтрацию.

-----

`dns_server` переключается между DNS-серверами, необходимо указать дополнительные данные:

 `server:adguard dns` переключается на сервер AdGuard DNS;
> Примечание: полный список поддерживаемых имён провайдеров можно найти в настройках AdGuard DNS в разделе «Пользовательские настройки DNS»

 `server:custom` переключается на ранее добавленный сервер с именем `custom`;

 `server:tls://dns.adguard.com` создаёт новый сервер и переключается на него, если среди ранее добавленных серверов и провайдеров нет сервера с таким же адресом. В противном случае он переключается на соответствующий сервер. Адреса серверов можно добавлять в виде IP (обычный DNS), `sdns://…` (DNSCrypt или DNS-over-HTTPS), `https://…` (DNS-over-HTTPS) или `tls://...` (DNS-over-TLS);

 `server:1.1.1.1, tls://1.1.1.1` создаёт сервер с адресами через запятую и переключается на него. При добавлении сервера через `server:1.1.1.1, tls://1.1.1.1` ранее добавленный сервер удаляется.

 `server:system` сбрасывает настройки DNS на системные DNS-серверы по умолчанию.

 -----



`proxy_state` включает/отключает исходящий прокси.  Требуется установить дополнительный флажок:

`enable:true` или `enable:false` активирует или деактивирует исходящий прокси соответственно.

-----


`proxy_default` устанавливает прокси из списка ранее добавленных по умолчанию или создаёт новый, если сервер ранее не добавлялся.

Укажите дополнительные данные:

`server:[name]`, где `[name]` — имя исходящего прокси из списка.

Или вы можете настроить параметры сервера вручную:

`server:[type=…&host=…&port=…&username=…&password=…&udp=…&trust=…]`.

`proxy_remove` удаляет прокси-сервер из списка ранее добавленных.

`server:[name]`, где `[name]` — имя исходящего прокси из списка.

Или вы можете настроить параметры сервера вручную:

`server:[type=…&host=…&port=…&username=…&password=…&udp=…&trust=…]`.

* **Обязательные параметры**:

`[type]` — тип прокси-сервера:
- HTTP;
- SOCKS4;
- SOCKS5;
- HTTPS_CONNECT.

`[host]` — исходящий прокси-домен или IP-адрес;

`[port]` — исходящий порт прокси (целое число от 1 до 65535);

* **Дополнительные параметры**:

 `[login and password]` — только если этого требует прокси. Эти данные игнорируются при настройке **SOCKS4**;

 `[udp]` применяется только на **серверах типа SOCKS5** и включает опцию **UDP через SOCKS5**. Необходимо установить значение **true или false**;

 `[trust]` applies for **HTTPS_CONNECT** server type only and include option **Trust any certificates**. Необходимо указать значение **true или false**.

 > **Пример**:

`настройка по имени сервера`: server:MyServer

 `настройка вручную`: server:host=1.2.3.4&port=80&type=SOCKS5&username=foo&password=bar&udp=true

-----

**Не забудьте добавить пароль в качестве дополнения и указать имя и класс пакета! Необходимо сделать это для каждого интента.**

Дополнительно: `пароль:*******`

Имя пакета: `com.adguard.android`

Класс: `com.adguard.android.receivers.AutomationReceiver`

### Выполнение без уведомлений

Чтобы выполнить задачу без показа тоста, добавьте в дополнительном EXTRA `quiet:true`

### Пример

![Автоматизация](https://cdn.adguard.com/content/kb/ad_blocker/android/solving_problems/tasker/automation2.png)